<!doctype html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Jellyfin Docker" /><meta property="og:locale" content="en" /><meta name="description" content="Docker Compose Jellyfin" /><meta property="og:description" content="Docker Compose Jellyfin" /><link rel="canonical" href="https://codefreak558.github.io/posts/jellyfin-stack/" /><meta property="og:url" content="https://codefreak558.github.io/posts/jellyfin-stack/" /><meta property="og:site_name" content="Homelab Docs" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-09-19T19:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Jellyfin Docker" /><meta name="twitter:site" content="@codefreak6" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-09-21T22:19:41+02:00","datePublished":"2023-09-19T19:00:00+02:00","description":"Docker Compose Jellyfin","headline":"Jellyfin Docker","mainEntityOfPage":{"@type":"WebPage","@id":"https://codefreak558.github.io/posts/jellyfin-stack/"},"url":"https://codefreak558.github.io/posts/jellyfin-stack/"}</script><title>Jellyfin Docker | Homelab Docs</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Homelab Docs"><meta name="application-name" content="Homelab Docs"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="https://avatars.githubusercontent.com/u/46318596?v=4" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><h1 class="site-title"> <a href="/">Homelab Docs</a></h1><p class="site-subtitle fst-italic mb-0">A homelab documentation page</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <a href="https://github.com/codefreak558" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/codefreak6" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['codefreak','darkblue.co.za'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Jellyfin Docker</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4" ><article class="px-1"><header><h1 data-toc-skip>Jellyfin Docker</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1695142800" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Sep 19, 2023 </time> </span> <span> Updated <time data-ts="1695327581" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Sep 21, 2023 </time> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/codefreak6">Aidan Taylor</a> </em> </span> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1029 words" > <em>5 min</em> read</span></div></div></header><div class="content"><h2 id="docker-compose-jellyfin"><span class="me-2">Docker Compose Jellyfin</span><a href="#docker-compose-jellyfin" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>After some searching for a good Jellyfin stack we came across the github repo made by <a href="https://github.com/AdrienPoupa/">AdrienPoupa</a>, the repo is called <a href="https://github.com/AdrienPoupa/docker-compose-nas">Docker-Compose-Nas</a>. This github repo fills our Jellyfin needs with having Sonarr, Radarr, Prowlarr and Jellyfin setup in one big <code class="language-plaintext highlighter-rouge">docker-compose</code> file.</p><h2 id="table-of-content"><span class="me-2">Table of Content</span><a href="#table-of-content" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><a href="#docker-compose-jellyfin">Docker Compose Jellyfin</a><ul><li><a href="#table-of-content">Table of Content</a><li><a href="#jellyfin-stack">Jellyfin Stack</a><ul><li><a href="#environment-variables">Environment Variables</a></ul><li><a href="#quick-start">Quick Start</a><li><a href="#cloudflare-tunnels">Cloudflare Tunnels</a><li><a href="#laptop-specific-configuration">Laptop Specific Configuration</a></ul></ul><h2 id="prerequisites"><span class="me-2">Prerequisite’s</span><a href="#prerequisites" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ol><li>Docker<li>Docker-Compose<li>Laptop or Server with Intel i3 or Ryzen 3 1200 and up<li>Domain Name<li>SSH connection to server</ol><h2 id="jellyfin-stack"><span class="me-2">Jellyfin Stack</span><a href="#jellyfin-stack" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The Jellyfin stack that we will use includes the following extra containers:</p><ul><li>Jellyfin<li>Sonarr<li>Radarr<li>Prowlarr<li>qBittorrent</ul><p>We have done some editing to the <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file as using Jellyfin behind the traefik routor doesn’t work well.</p><p>The first step you need to do is clone the github repo to your server with the following command:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed=""><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="go">git clone https://github.com/AdrienPoupa/docker-compose-nas
cd docker-compose-nas
</span></pre></table></code></div></div><p>Once we have downloaded the Github repo we need to do some changed to the <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file along with creating the .env file.</p><p>The .env file can be made by copying the example file with this command:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed=""><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="go">cp .env.example .env
</span></pre></table></code></div></div><p>Once this is done fill in the .env file with the details for everything that is needed. Here is the env variables that are used in this project.</p><h2 id="environment-variables"><span class="me-2">Environment Variables</span><a href="#environment-variables" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="table-wrapper"><table><thead><tr><th>Variable<th>Description<th>Default<tbody><tr><td><code class="language-plaintext highlighter-rouge">COMPOSE_FILE</code><td>Docker compose files to load<td><code class="language-plaintext highlighter-rouge">docker-compose.yml</code><tr><td><code class="language-plaintext highlighter-rouge">COMPOSE_PATH_SEPARATOR</code><td>Path separator between compose files to load<td><code class="language-plaintext highlighter-rouge">:</code><tr><td><code class="language-plaintext highlighter-rouge">USER_ID</code><td>ID of the user to use in Docker containers<td><code class="language-plaintext highlighter-rouge">1000</code><tr><td><code class="language-plaintext highlighter-rouge">GROUP_ID</code><td>ID of the user group to use in Docker containers<td><code class="language-plaintext highlighter-rouge">1000</code><tr><td><code class="language-plaintext highlighter-rouge">TIMEZONE</code><td>TimeZone used by the container.<td><code class="language-plaintext highlighter-rouge">America/New_York</code><tr><td><code class="language-plaintext highlighter-rouge">DATA_ROOT</code><td>Host location of the data files<td><code class="language-plaintext highlighter-rouge">/mnt/data</code><tr><td><code class="language-plaintext highlighter-rouge">DOWNLOAD_ROOT</code><td>Host download location for qBittorrent, should be a subfolder of <code class="language-plaintext highlighter-rouge">DATA_ROOT</code><td><code class="language-plaintext highlighter-rouge">/mnt/data/torrents</code><tr><td><code class="language-plaintext highlighter-rouge">PIA_LOCATION</code><td>Servers to use for PIA<td><code class="language-plaintext highlighter-rouge">ca</code> (Montreal, Canada)<tr><td><code class="language-plaintext highlighter-rouge">PIA_USER</code><td>PIA username<td> <tr><td><code class="language-plaintext highlighter-rouge">PIA_PASS</code><td>PIA password<td> <tr><td><code class="language-plaintext highlighter-rouge">PIA_LOCAL_NETWORK</code><td>PIA local network<td><code class="language-plaintext highlighter-rouge">192.168.0.0/16</code><tr><td><code class="language-plaintext highlighter-rouge">HOSTNAME</code><td>Hostname of the NAS, could be a local IP or a domain name<td><code class="language-plaintext highlighter-rouge">localhost</code><tr><td><code class="language-plaintext highlighter-rouge">ADGUARD_HOSTNAME</code><td>Optional - AdGuard Home hostname used, if enabled<td> <tr><td><code class="language-plaintext highlighter-rouge">ADGUARD_USERNAME</code><td>Optional - AdGuard Home username to show details in the homepage, if enabled<td> <tr><td><code class="language-plaintext highlighter-rouge">ADGUARD_PASSWORD</code><td>Optional - AdGuard Home password to show details in the homepage, if enabled<td> <tr><td><code class="language-plaintext highlighter-rouge">DNS_CHALLENGE</code><td>Enable/Disable DNS01 challenge, set to <code class="language-plaintext highlighter-rouge">false</code> to disable.<td><code class="language-plaintext highlighter-rouge">true</code><tr><td><code class="language-plaintext highlighter-rouge">DNS_CHALLENGE_PROVIDER</code><td>Provider for DNS01 challenge, <a href="https://doc.traefik.io/traefik/https/acme/#providers">see list here</a>.<td><code class="language-plaintext highlighter-rouge">cloudflare</code><tr><td><code class="language-plaintext highlighter-rouge">LETS_ENCRYPT_CA_SERVER</code><td>Let’s Encrypt CA Server used to generate certificates, set to production by default.<br />Set to <code class="language-plaintext highlighter-rouge">https://acme-staging-v02.api.letsencrypt.org/directory</code> to test your changes with the staging server.<td><code class="language-plaintext highlighter-rouge">https://acme-v02.api.letsencrypt.org/directory</code><tr><td><code class="language-plaintext highlighter-rouge">LETS_ENCRYPT_EMAIL</code><td>E-mail address used to send expiration notifications<td> <tr><td><code class="language-plaintext highlighter-rouge">CLOUDFLARE_EMAIL</code><td>CloudFlare Account email<td> <tr><td><code class="language-plaintext highlighter-rouge">CLOUDFLARE_DNS_API_TOKEN</code><td>API token with <code class="language-plaintext highlighter-rouge">DNS:Edit</code> permission<td> <tr><td><code class="language-plaintext highlighter-rouge">CLOUDFLARE_ZONE_API_TOKEN</code><td>API token with <code class="language-plaintext highlighter-rouge">Zone:Read</code> permission<td> <tr><td><code class="language-plaintext highlighter-rouge">SONARR_API_KEY</code><td>Sonarr API key to show information in the homepage<td> <tr><td><code class="language-plaintext highlighter-rouge">RADARR_API_KEY</code><td>Radarr API key to show information in the homepage<td> <tr><td><code class="language-plaintext highlighter-rouge">PROWLARR_API_KEY</code><td>Prowlarr API key to show information in the homepage<td> <tr><td><code class="language-plaintext highlighter-rouge">JELLYFIN_API_KEY</code><td>Jellyfin API key to show information in the homepage<td> <tr><td><code class="language-plaintext highlighter-rouge">HOMEPAGE_VAR_TITLE</code><td>Title of the homepage<td><code class="language-plaintext highlighter-rouge">Docker-Compose NAS</code><tr><td><code class="language-plaintext highlighter-rouge">HOMEPAGE_VAR_SEARCH_PROVIDER</code><td>Homepage search provider, <a href="https://gethomepage.dev/en/widgets/search/">see list here</a><td><code class="language-plaintext highlighter-rouge">google</code><tr><td><code class="language-plaintext highlighter-rouge">HOMEPAGE_VAR_HEADER_STYLE</code><td>Homepage header style, <a href="https://gethomepage.dev/en/configs/settings/#header-style">see list here</a><td><code class="language-plaintext highlighter-rouge">boxed</code><tr><td><code class="language-plaintext highlighter-rouge">HOMEPAGE_VAR_WEATHER_CITY</code><td>Homepage weather city name<td> <tr><td><code class="language-plaintext highlighter-rouge">HOMEPAGE_VAR_WEATHER_LAT</code><td>Homepage weather city latitude<td> <tr><td><code class="language-plaintext highlighter-rouge">HOMEPAGE_VAR_WEATHER_LONG</code><td>Homepage weather city longitude<td> <tr><td><code class="language-plaintext highlighter-rouge">HOMEPAGE_VAR_WEATHER_UNIT</code><td>Homepage weather unit, either <code class="language-plaintext highlighter-rouge">metric</code> or <code class="language-plaintext highlighter-rouge">imperial</code><td><code class="language-plaintext highlighter-rouge">metric</code></table></div><p>The changes made to the <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file are the following</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed=""><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
</pre><td class="rouge-code"><pre><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.9"</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="s">.....</span>
  <span class="s">qbittorrent</span><span class="err">:</span>
    <span class="s">.....</span>
      <span class="s">#- com.centurylinklabs.watchtower.depends-on=/vpn</span>
      <span class="s">- homepage.group=Download</span>
      <span class="s">- homepage.name=qBittorrent</span>
      <span class="s">- homepage.icon=qbittorrent.png</span>
      <span class="s">- homepage.href=/qbittorrent</span>
      <span class="s">- homepage.description=Bittorrent client</span>
      <span class="s">- homepage.weight=5</span>
      <span class="s">- homepage.widget.type=qbittorrent</span>
      <span class="s">- homepage.widget.url=http://qbittorrent:8080</span>
      <span class="s">- homepage.widget.username=admin</span>
      <span class="s">- homepage.widget.password=adminadmin</span>
  <span class="s"># vpn</span><span class="err">:</span>
  <span class="c1">#   image: thrnz/docker-wireguard-pia</span>
  <span class="c1">#   container_name: vpn</span>
  <span class="c1">#   volumes:</span>
  <span class="c1">#     - ./pia:/pia</span>
  <span class="c1">#     - ./pia-shared:/pia-shared</span>
  <span class="c1">#   cap_add:</span>
  <span class="c1">#     - NET_ADMIN</span>
  <span class="c1">#     - SYS_MODULE</span>
  <span class="c1">#   environment:</span>
  <span class="c1">#     - LOC=${PIA_LOCATION}</span>
  <span class="c1">#     - USER=${PIA_USER}</span>
  <span class="c1">#     - PASS=${PIA_PASS}</span>
  <span class="c1">#     - LOCAL_NETWORK=${PIA_LOCAL_NETWORK}</span>
  <span class="c1">#     - PORT_FORWARDING=1</span>
  <span class="c1">#     - PORT_PERSIST=1</span>
  <span class="c1">#     - PORT_SCRIPT=/pia-shared/portupdate-qbittorrent.sh</span>
  <span class="c1">#     - EXIT_ON_FATAL=1</span>
  <span class="c1">#   sysctls:</span>
  <span class="c1">#     - net.ipv4.conf.all.src_valid_mark=1</span>
  <span class="c1">#     - net.ipv6.conf.default.disable_ipv6=1</span>
  <span class="c1">#     - net.ipv6.conf.all.disable_ipv6=1</span>
  <span class="c1">#     - net.ipv6.conf.lo.disable_ipv6=1</span>
  <span class="c1">#   healthcheck:</span>
  <span class="c1">#     test: ping -c 1 www.google.com || exit 1</span>
  <span class="c1">#     interval: 30s</span>
  <span class="c1">#     timeout: 10s</span>
  <span class="c1">#     retries: 3</span>
  <span class="c1">#   restart: always</span>
  <span class="c1">#   labels:</span>
  <span class="c1">#     # network mode is not supported: https://github.com/containrrr/watchtower/issues/1286#issuecomment-1214291660</span>
  <span class="c1">#     - com.centurylinklabs.watchtower.enable=false</span>
  <span class="na">jellyfin</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">jellyfin/jellyfin</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">jellyfin</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">PUID=${USER_ID}</span>
      <span class="pi">-</span> <span class="s">PGID=${GROUP_ID}</span>
      <span class="pi">-</span> <span class="s">TZ=${TIMEZONE}</span>
      <span class="pi">-</span> <span class="s">JELLYFIN_PublishedServerUrl=${HOSTNAME}/jellyfin</span>
    <span class="na">group_add</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">109"</span> <span class="c1"># Change this to match your "render" host group id and remove this comment</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./jellyfin/config:/config</span>
      <span class="pi">-</span> <span class="s">./jellyfin:/cache</span>
      <span class="pi">-</span> <span class="s">/home/serveradmin/public:/data</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">7359:7359/udp"</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">1900:1900/udp"</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">8096:8096"</span>
    <span class="na">devices</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">/dev/dri/renderD128:/dev/dri/renderD128</span>
      <span class="c1"># - /dev/dri/card0:/dev/dri/card0</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
    <span class="na">labels</span><span class="pi">:</span>
<span class="c1">#      - traefik.enable=true</span>
<span class="c1">#      - traefik.http.routers.jellyfin.rule=(Host(`${HOSTNAME}`) &amp;&amp; PathPrefix(`/jellyfin`))</span>
<span class="c1">#      - traefik.http.routers.jellyfin.tls=true</span>
<span class="c1">#      - traefik.http.routers.jellyfin.tls.certresolver=myresolver</span>
<span class="c1">#      - traefik.http.services.jellyfin.loadbalancer.server.port=8096</span>
      <span class="pi">-</span> <span class="s">homepage.group=Media</span>
      <span class="pi">-</span> <span class="s">homepage.name=Jellyfin</span>
      <span class="pi">-</span> <span class="s">homepage.icon=jellyfin.png</span>
      <span class="pi">-</span> <span class="s">homepage.href=http://10.21.21.23:8096</span>
      <span class="pi">-</span> <span class="s">homepage.description=Media server</span>
      <span class="pi">-</span> <span class="s">homepage.weight=3</span>
      <span class="pi">-</span> <span class="s">homepage.widget.type=jellyfin</span>
      <span class="pi">-</span> <span class="s">homepage.widget.url=http://10.21.21.23:8096</span>
      <span class="pi">-</span> <span class="s">homepage.widget.key=${JELLYFIN_API_KEY}</span>
  <span class="s">....</span>

<span class="na">networks</span><span class="pi">:</span>
  <span class="na">default</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">docker-compose-nas</span>
</pre></table></code></div></div><p>The changes that have been made is disabling the VPN as we don’t need our qBittorrent container behind a VPN. <em>This is not recommended</em>. The second change made is commenting out the traefik labels in the Jellyfin container because of the issues we had when trying to set this up.</p><p>Once this has been done we can spin up the docker container.</p><h2 id="quick-start"><span class="me-2">Quick Start</span><a href="#quick-start" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>For the first time, run <code class="language-plaintext highlighter-rouge">./update-config.sh</code> to update the applications base URLs and set the API keys in <code class="language-plaintext highlighter-rouge">.env</code>.</p><p>If you want to show Jellyfin information in the homepage, create it in Jellyfin settings and fill <code class="language-plaintext highlighter-rouge">JELLYFIN_API_KEY</code>.</p><h2 id="cloudflare-tunnels"><span class="me-2">Cloudflare Tunnels</span><a href="#cloudflare-tunnels" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>We use Cloudflare Tunnels so that we can gain access to this stack outside of our home network.</p><p>The documentation for cloudflare tunnels can be found <a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwjduPbMnLeBAxX-VfEDHbX4AkYQFnoECBgQAQ&amp;url=https%3A%2F%2Fdevelopers.cloudflare.com%2Fcloudflare-one%2Fconnections%2Fconnect-networks%2F&amp;usg=AOvVaw1eHe0lSHXFaD0OH3rwJ4Z0&amp;opi=89978449">here</a></p><h2 id="laptop-specific-configuration"><span class="me-2">Laptop Specific Configuration</span><a href="#laptop-specific-configuration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>If the server is installed on a laptop, you may want to disable the suspension when the lid is closed:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed=""><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="go">sudo nano /etc/systemd/logind.conf
</span></pre></table></code></div></div><p>Replace:</p><ul><li><code class="language-plaintext highlighter-rouge">#HandleLidSwitch=suspend</code> by <code class="language-plaintext highlighter-rouge">HandleLidSwitch=ignore</code><li><code class="language-plaintext highlighter-rouge">#LidSwitchIgnoreInhibited=yes</code> by <code class="language-plaintext highlighter-rouge">LidSwitchIgnoreInhibited=no</code></ul><p>Then restart:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed=""><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="go">sudo service systemd-logind restart
</span></pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/homelab/">homelab</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/homelab/" class="post-tag no-text-decoration" >homelab</a> <a href="/tags/server/" class="post-tag no-text-decoration" >server</a> <a href="/tags/jellyfin/" class="post-tag no-text-decoration" >jellyfin</a> <a href="/tags/sonarr/" class="post-tag no-text-decoration" >sonarr</a> <a href="/tags/radarr/" class="post-tag no-text-decoration" >radarr</a> <a href="/tags/docker/" class="post-tag no-text-decoration" >docker</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted me-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Jellyfin%20Docker%20-%20Homelab%20Docs&url=https%3A%2F%2Fcodefreak558.github.io%2Fposts%2Fjellyfin-stack%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Jellyfin%20Docker%20-%20Homelab%20Docs&u=https%3A%2F%2Fcodefreak558.github.io%2Fposts%2Fjellyfin-stack%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fcodefreak558.github.io%2Fposts%2Fjellyfin-stack%2F&text=Jellyfin%20Docker%20-%20Homelab%20Docs" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram" > <i class="fa-fw fab fa-telegram"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/jellyfin-stack/">Jellyfin Docker</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/tags/homelab/">homelab</a> <a class="post-tag btn btn-outline-primary" href="/tags/jellyfin/">jellyfin</a> <a class="post-tag btn btn-outline-primary" href="/tags/nginx/">nginx</a> <a class="post-tag btn btn-outline-primary" href="/tags/radarr/">radarr</a> <a class="post-tag btn btn-outline-primary" href="/tags/server/">server</a> <a class="post-tag btn btn-outline-primary" href="/tags/sonarr/">sonarr</a></div></section></div><section id="toc-wrapper" class="ps-0 pe-4 mb-5"><h2 class="panel-heading ps-3 pt-2 mb-2">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/nginx-reverse-proxy/" class="post-preview card h-100"><div class="card-body"> <time class="small" data-ts="1695484800" data-df="ll" > Sep 23, 2023 </time><h4 class="pt-0 my-2">Nginx Reverse Proxy</h4><div class="text-muted small"><p> Getting Started Firstly we need to make sure we have docker and docker-compose installed and setup. Once the has been done we need to set up the docker-compose.yml file for nginx. We can get the ...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"><div class="btn btn-outline-primary disabled" aria-label="Older"><p>-</p></div><a href="/posts/nginx-reverse-proxy/" class="btn btn-outline-primary" aria-label="Newer" ><p>Nginx Reverse Proxy</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p> © <time>2023</time> <a href="https://twitter.com/codefreak6">Aidan Taylor</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/tags/homelab/">homelab</a> <a class="post-tag btn btn-outline-primary" href="/tags/jellyfin/">jellyfin</a> <a class="post-tag btn btn-outline-primary" href="/tags/nginx/">nginx</a> <a class="post-tag btn btn-outline-primary" href="/tags/radarr/">radarr</a> <a class="post-tag btn btn-outline-primary" href="/tags/server/">server</a> <a class="post-tag btn btn-outline-primary" href="/tags/sonarr/">sonarr</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask"></div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.1/dist/jquery.min.js,npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.9/dayjs.min.js,npm/dayjs@1.11.9/locale/en.min.js,npm/dayjs@1.11.9/plugin/relativeTime.min.js,npm/dayjs@1.11.9/plugin/localizedFormat.min.js,npm/tocbot@4.21.1/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/unregister.js"></script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
